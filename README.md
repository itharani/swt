# swt

## Overview
The **swt** project is an automated pipeline designed to generate unit tests, detect bugs, iteratively optimize code, and ensure robust code quality. By leveraging GitHub Actions and an LLM (Large Language Model), this project streamlines the process of improving and maintaining codebases. Below is a detailed explanation of how the pipeline works and its planned future enhancements.

---

## How It Works (Current Functionality)

1. **Triggering the Workflow**:
   - The pipeline is activated when a new push is made to the repository's `main` branch or a pull request is opened.

2. **Analyzing Code Files**:
   - The workflow scans all Python files within the `testfiles` folder.

3. **Generating Unit Tests**:
   - The content of each code file is sent to an LLM with a prompt to generate corresponding unit tests.
   - The response from the LLM is parsed and formatted into valid Python unit test files.

4. **Saving Generated Tests**:
   - The newly created unit test files are saved under the `test/unit` directory.

5. **Pushing Unit Tests**:
   - The workflow automatically commits and pushes the new unit test files back to the repository.

---

## Planned Enhancements

The pipeline will be expanded to include the following capabilities:

1. **Running Unit Tests**:
   - After generating the unit test files, the workflow will execute the tests using a Python test runner (e.g., `pytest`).

2. **Bug Detection**:
   - The pipeline will analyze the test results to identify any failing tests, which could indicate bugs in the code.

3. **Iterative Bug Fixing**:
   - The LLM will be prompted to suggest fixes for detected bugs.
   - The suggested fixes will be applied to the code, and the updated code will be tested again.
   - This cycle will repeat until no more bugs are detected.

4. **Creating Pull Requests**:
   - Once all bugs are resolved and the code passes the unit tests, the pipeline will create a pull request to merge the optimized code back into the repository.

---

## Folder Structure

- `testfiles/`:
  Contains the Python files to be analyzed by the pipeline.

- `test/unit/`:
  Stores the unit test files generated by the pipeline.

---

## Getting Started

### Setting Up the Pipeline

1. Clone the repository, navigate to the project directory and create a new branch from the main branch
   ```bash
   git clone https://github.com/itharani/swt.git
   cd swt
   git checkout -b new-branch-name
   ```

2. Ensure the `testfiles` folder contains Python files for which unit tests are to be generated.

3. In the .github/workflows/action.yml, make changes as below:
    ```
    on:
        push:
            branches:
                - {new-branch-namee}  
        pull_request:
            branches:
                - {new-branch-name}  
      ```

    ```
    jobs:
        build:
            runs-on: ubuntu-latest
                
                ...

                - name: Push changes
                    uses: ad-m/github-push-action@v0.6.0
                    with:
                    github_token: ${{ secrets.GITHUB_TOKEN }}  # This is automatically generated by GitHub
                    branch: {new-branch-name}
                
                ...

    ```

3. Push the changes to new-branch-name to activate the pipeline.

---

## Workflow Configuration
The GitHub Actions workflow is defined in `.github/workflows/action.yml`. Key steps include:

- **Checkout Code**:
  Ensures the latest code is available in the workflow.
- **Install Dependencies**:
  Installs required Python packages using `pip`.
- **Generate Unit Tests**:
  Sends code content to the LLM for generating unit tests.
- **Commit and Push**:
  Adds the generated tests to the repository and pushes them to the `main` branch.

---

## License
This project is licensed under the MIT License. See the `LICENSE` file for details.

---

## Acknowledgments
Special thanks to:

- The contributors to this project.
- The developers of GitHub Actions for enabling seamless CI/CD workflows.
- OpenAI for providing the LLM used in this pipeline.

